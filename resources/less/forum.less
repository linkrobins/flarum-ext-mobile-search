@media @tablet-up {
    .IndexPage-toolbar-view .item-search {
        display: none;
    }
}

@media @phone {
    // Hide normal search when on homepage
    .App--index .Header-controls .item-search {
        display: none;
    }

    // Expand search bar to available space
    .IndexPage-toolbar {
        display: flex !important; // Force the toolbar to show on mobile

        .IndexPage-toolbar-view {
            flex: 1;
            display: flex;
            flex-wrap: wrap;

            .item-search {
                flex: 1;

                // CRITICAL FIX: Modern Flarum hides the .Search component on mobile.
                // We must force it back to block display.
                .Search {
                    display: block !important;
                }

                .Search-input input {
                    width: 100%;
                }
            }
        }

        .IndexPage-toolbar-action {
            display: flex;
        }
    }
}
